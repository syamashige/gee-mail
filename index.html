<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

      var inboxTotal = geemails.length;

      function myHelper(elem, idLabel, classLabel, content) {
        var helpMe = document.createElement(elem);
        helpMe.id = idLabel;
        helpMe.className = classLabel;
        helpMe.innerHTML = content;

        return helpMe;
      }

       var inboxElement = myHelper('div', 'inbox', 'sides', 'Inbox ( ' + geemails.length + ' )');
        // inboxElement.id = 'inbox';
        // inboxElement.className = 'sides';
        // inboxElement.innerHTML = 'Inbox ( ' + geemails.length + ' )';
        document.getElementById('sidebar').appendChild(inboxElement);

      var sidebarElement1 = myHelper('div', 'important', 'sides', 'Important');
        // sidebarElement1.id = 'important';
        // sidebarElement1.className = 'sides';
        // sidebarElement1.innerHTML = 'Important';
        document.getElementById('sidebar').appendChild(sidebarElement1);

      var sidebarElement2 = myHelper('div', 'sentmail', 'sides', 'Sent Mail');
        // sidebarElement2.id = 'sentmail';
        // sidebarElement2.className = 'sides';
        // sidebarElement2.innerHTML = 'Sent Mail';
        document.getElementById('sidebar').appendChild(sidebarElement2);

      var sidebarElement3 = myHelper('div', 'drafts', 'sides', 'Drafts');
        // sidebarElement3.id = 'drafts';
        // sidebarElement3.className = 'sides';
        // sidebarElement3.innerHTML = 'Drafts';
        document.getElementById('sidebar').appendChild(sidebarElement3);

        //Put everything within a function: 
       function generateEmail (messages) {
       	for (var i = 0; i<messages.length; i++) {
       		var subject = messages[i].subject; 
       		var sender = messages[i]. sender; 
       		var date = messages[i].date; 
       		var body = messages[i].body;

          console.log(messages.length);

       		var emailContainer = document.createElement('div');
       		emailContainer.className = 'emails';
       		document.getElementById('main').appendChild(emailContainer);

          var checkBoxElem = document.createElement('input');
          checkBoxElem.className = 'checks';
          checkBoxElem.type = 'checkbox';
          emailContainer.appendChild(checkBoxElem);

          var starElem = document.createElement('img');
          starElem.className = 'star';
          starElem.src = "/assets/star.png";
          emailContainer.appendChild(starElem);

          var senderElement = myHelper('div', null, 'sender', sender); 
          // var senderElement = document.createElement ('div');
       		// senderElement.className = 'sender';
       		// senderElement.innerHTML = sender; 
       		emailContainer.appendChild(senderElement);

       		var subjectElement = myHelper('div', null, 'subject', subject);
       		// subjectElement.className = 'subject';
       		// subjectElement.innerHTML = subject; 
       		emailContainer.appendChild(subjectElement);

       		var dateElement = myHelper('div', null, 'date', date);
       		// dateElement.className = 'date';
       		// dateElement.innerHTML = date; 
       		emailContainer.appendChild(dateElement);

       		var bodyElement = myHelper('div', null, 'body', body);
       		// bodyElement.className = 'body';
       		// bodyElement.innerHTML = body; 
       		emailContainer.appendChild(bodyElement);

       		var emailListener = document.getElementsByClassName('emails');
       		for (var j = 0; j < emailListener.length; j++) {
       			emailListener[j].addEventListener ('click', showMessages);
			}
    function showMessages (event) {
      var showBody = this.querySelectorAll('.body')[0];
        if(showBody.classList.contains('show')===false) {
            showBody.classList.add('show'); }
        else { 
            showBody.classList.remove('show');
          }
        }  
      }
    }

    generateEmail(geemails);


      setInterval( function (){
        var newMessages = getNewMessage();
        geemails.push(newMessages);
        console.log(newMessages);

        var emailContainer = document.createElement('div');
          emailContainer.className = 'emails';
          document.getElementById('main').appendChild(emailContainer);

          var senderElement = myHelper('div', null, 'sender', newMessages.sender);
          // senderElement.className = 'sender';
          // senderElement.innerHTML = newMessages.sender; 
          emailContainer.appendChild(senderElement);

          var subjectElement = myHelper('div', null, 'subject', newMessages.subject);
          // subjectElement.className = 'subject';
          // subjectElement.innerHTML = newMessages.subject; 
          emailContainer.appendChild(subjectElement);

          var dateElement = myHelper('div', null, 'date', newMessages.date);
          // dateElement.className = 'date';
          // dateElement.innerHTML = newMessages.date; 
          emailContainer.appendChild(dateElement);

          var bodyElement = myHelper('div', null, 'body', newMessages.body);
          // bodyElement.className = 'body';
          // bodyElement.innerHTML = newMessages.body; 
          emailContainer.appendChild(bodyElement);

          var emailListener = document.getElementsByClassName('emails');
          console.log(emailListener);
          for (var j = 0; j < emailListener.length; j++) {
            emailListener[j].addEventListener ('click', showMessages);
      }
            function showMessages (event) {
              var showBody = this.querySelectorAll('.body')[0];
                if(showBody.classList.contains('show')===false) {
                showBody.classList.add('show'); }
                else { 
                showBody.classList.remove('show');
                }
              }

        inboxTotal += 1;
        inbox.innerHTML = 'Inbox ( ' + inboxTotal + ' )';

      }, 6000); 
      
      };

    </script>
	</head>
	<body>
    <div id="top">
        <div id="header">
            <!-- <h1 id="title">Gee-Mail</h1> -->
            <img src="/assets/Geegle-Logo.png" alt="" id="logo">
            <input type="text"id="search">
            <button id="magnifier"><img src="/assets/search-icon.png" alt="" class="searchIcon"></button>
          </div>
          <div id="topbar">
            <img src="/assets/geemail-logo.png" alt="" id="mailLogo">
           <button id="box"><input type="checkbox" class="checks"></button>
           <button id="refresh"><img src="/assets/refresh.png" alt="" class="refreshIcon"></button>
           <button id="more"><img src="/assets/more-button.png" alt="" class="moreIcon"></button>
          </div>
    </div>
    <!-- <div id="header">
      <!-- <h1 id="title">Gee-Mail</h1> -->
      <!-- <img src="/assets/Geegle-Logo.png" alt="" id="logo"> -->
    <!-- </div> -->
    <!-- <div id="topbar"> -->
      <!-- Geemail -->
      <!-- <img src="/assets/geemail-logo.png" alt="" id="mailLogo"> -->
    <!-- </div> --> 
    <!-- <h1 id="title"> Gee-Mail </h1> -->
    <div class="sides" id="sidebar">
      <button id="compose">COMPOSE</button>
    </div>
		<div class="container" id="main">
			
		</div>
</body>
</html>